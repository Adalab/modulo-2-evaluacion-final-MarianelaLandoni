"use strict";const inputUser=document.querySelector(".js_inputUser"),btnSearch=document.querySelector(".js_btnSearch"),btnReset=document.querySelector(".js_btnReset"),listResults=document.querySelector(".js_listResults"),listFavourites=document.querySelector(".js_listFavourites"),resetAllFavs=document.querySelector(".js_resetAllFavs");let dataAnime=[],favouritesAnime=[];function renderFavourites(){let e="";for(const t of favouritesAnime)"https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png"===t.images.jpg.image_url?e+=`<li class="listAnime  js_eachAnime" id="${t.mal_id} "> <img class="imgAnime"  src='https://via.placeholder.com/210x295/ffffff/666666/?text=TV'><h3 class="titleAnime">${t.title}</h3></li>`:e+=`<li class="listAnime  js_eachAnime" id="${t.mal_id} "><img class="imgAnime" src=${t.images.jpg.image_url}><h3 class="titleAnime">${t.title}</h3></li>`;localStorage.setItem("data",JSON.stringify(favouritesAnime)),listFavourites.innerHTML=e}function handleClickFavourite(e){const t=e.currentTarget;console.log(t);const i=parseInt(e.currentTarget.id);console.log(i);const s=dataAnime.find(e=>e.mal_id===i),n=favouritesAnime.findIndex(e=>e.mal_id===i);-1===n?(favouritesAnime.push(s),t.classList.add("selected")):(favouritesAnime.splice(n,1),t.classList.remove("selected")),renderFavourites(),listenerAnimes()}function listenerAnimes(){const e=document.querySelectorAll(".js_eachAnime");for(const t of e)t.addEventListener("click",handleClickFavourite)}function renderAnime(){let e="";for(const t of dataAnime)"https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png"===t.images.jpg.image_url?e+=` <li class="listAnime js_eachAnime " id="${t.mal_id} "><img class="imgAnime"  src='https://via.placeholder.com/210x295/ffffff/666666/?text=TV'><h3 class="titleAnime">${t.title}</h3></li>`:e+=`<li class="listAnime js_eachAnime " id="${t.mal_id} "><img class="imgAnime" src=${t.images.jpg.image_url}><h3 class="titleAnime">${t.title}</h3></li>`;listResults.innerHTML=e,listenerAnimes()}function handleClick(e){e.preventDefault(),getAnimeData()}function handleClickReset(){listResults.innerHTML="",userInput=""}function handleResetAllFavs(){localStorage.clear(),listFavourites.innerHTML="",favouritesAnime=[]}function getAnimeData(){const e=inputUser.value;fetch("https://api.jikan.moe/v4/anime?q="+e).then(e=>e.json()).then(e=>{dataAnime=e.data,renderAnime()})}function onLoad(){const e=JSON.parse(localStorage.getItem("data"));console.log(e),e?(favouritesAnime=e,renderFavourites(),console.log("usa LS")):console.log("no estoy en el LS")}btnSearch.addEventListener("click",handleClick),btnReset.addEventListener("click",handleClickReset),resetAllFavs.addEventListener("click",handleResetAllFavs),onLoad();