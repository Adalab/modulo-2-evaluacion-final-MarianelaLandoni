"use strict";const inputUser=document.querySelector(".js_inputUser"),btnSearch=document.querySelector(".js_btnSearch"),btnReset=document.querySelector(".js_btnReset"),listResults=document.querySelector(".js_listResults"),listFavourites=document.querySelector(".js_listFavourites");let dataAnime=[],favouritesAnime=[];function renderFavourites(){let e="";for(const i of favouritesAnime)"https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png"===i.images.jpg.image_url?e+=`<li class="listAnime  js_eachAnime" id="${i.mal_id} "><h3>${i.title}</h3> <img class="imgAnime"  src='https://via.placeholder.com/210x295/ffffff/666666/?text=TV'></li>`:e+=`<li class="listAnime  js_eachAnime" id="${i.mal_id} "><h3>${i.title}</h3><img class="imgAnime" src=${i.images.jpg.image_url}></li>`;localStorage.setItem("data",JSON.stringify(favouritesAnime)),listFavourites.innerHTML=e}function handleClickFavourite(e){const i=e.currentTarget;console.log(i);const t=parseInt(e.currentTarget.id);console.log(t);const n=dataAnime.find(e=>e.mal_id===t),s=favouritesAnime.findIndex(e=>e.mal_id===t);-1===s?(favouritesAnime.push(n),i.classList.add("selected")):(favouritesAnime.splice(s,1),i.classList.remove("selected")),renderFavourites(),listenerAnimes()}function listenerAnimes(){const e=document.querySelectorAll(".js_eachAnime");for(const i of e)i.addEventListener("click",handleClickFavourite)}function renderAnime(){let e="";for(const i of dataAnime){favouritesAnime.findIndex(e=>i.mal_id===e.mal_id);"https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png"===i.images.jpg.image_url?e+=` <li class="listAnime js_eachAnime " id="${i.mal_id} "><h3>${i.title}</h3><img class="imgAnime"  src='https://via.placeholder.com/210x295/ffffff/666666/?text=TV'></li>`:e+=`<li class="listAnime js_eachAnime " id="${i.mal_id} "><h3>${i.title}</h3><img class="imgAnime" src=${i.images.jpg.image_url}></li>`}listResults.innerHTML=e,listenerAnimes()}function getAnimeData(){const e=inputUser.value;fetch("https://api.jikan.moe/v4/anime?q="+e).then(e=>e.json()).then(e=>{dataAnime=e.data,renderAnime()})}function handleClick(e){e.preventDefault(),getAnimeData()}function handleClickReset(){listResults.innerHTML="",userInput=""}function onLoad(){const e=JSON.parse(localStorage.getItem("data"));console.log(e),e?(favouritesAnime=e,renderFavourites(),console.log("usa LS")):(getAnimeData(),console.log("no estoy en el LS"))}btnSearch.addEventListener("click",handleClick),btnReset.addEventListener("click",handleClickReset),onLoad();