"use strict";const inputUser=document.querySelector(".js_inputUser"),btnSearch=document.querySelector(".js_btnSearch"),btnReset=document.querySelector(".js_btnReset"),listResults=document.querySelector(".js_listResults"),listFavourites=document.querySelector(".js_listFavourites");let dataAnime=[],favouritesAnime=[];function renderFavourites(){let e="";for(const i of favouritesAnime)"https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png"===i.images.jpg.image_url?e+=`<li class="listAnime js_eachAnime" id="${i.mal_id} ">\n        <h3>${i.title}</h3>\n        <img class="imgAnime" src='https://via.placeholder.com/210x295/ffffff/666666/?text=TV'>\n        <i class="fa-solid fa-circle-xmark id="eliminateFav"></i>\n        </li>`:e+=`<li class="listAnime js_eachAnime" id="${i.mal_id} "><h3>${i.title}</h3><img class="imgAnime" src=${i.images.jpg.image_url}>\n      <i class="fa-solid fa-circle-xmark id="eliminateFav"></i></li>`;listFavourites.innerHTML=e}function handleClickFavourite(e){const i=parseInt(e.currentTarget.id),t=dataAnime.find(e=>e.mal_id===i),n=favouritesAnime.findIndex(e=>e.mal_id===i);-1===n?favouritesAnime.push(t):favouritesAnime.splice(n,1),renderFavourites(),listenerAnimes()}function listenerAnimes(){const e=document.querySelectorAll(".js_eachAnime");for(const i of e)i.addEventListener("click",handleClickFavourite)}function renderAnime(){let e="",i="";for(const t of dataAnime){i=-1!==favouritesAnime.findIndex(e=>t.mal_id===e.mal_id)?"selected":"","https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png"===t.images.jpg.image_url?e+=`<li class="listAnime ${i} js_eachAnime" id="${t.mal_id} ">\n        <h3>${t.title}</h3>\n        <img class="imgAnime"  src='https://via.placeholder.com/210x295/ffffff/666666/?text=TV'>\n        <i class="fa-solid fa-circle-xmark id="eliminateFav"></i>\n        </li>`:e+=`<li class="listAnime ${i} js_eachAnime" id="${t.mal_id} "><h3>${t.title}</h3><img class="imgAnime" src=${t.images.jpg.image_url}>\n        <i class="fa-solid fa-circle-xmark id="eliminateFav"></i></li>`}listResults.innerHTML=e,listenerAnimes()}function getAnimeData(){const e=inputUser.value;fetch("https://api.jikan.moe/v4/anime?q="+e).then(e=>e.json()).then(e=>{dataAnime=e.data,localStorage.setItem("data",JSON.stringify(favouritesAnime)),renderAnime()})}function handleClick(e){e.preventDefault(),getAnimeData()}function handleClickReset(){listResults.innerHTML="",userInput=""}function onLoad(){const e=JSON.parse(localStorage.getItem("data"));console.log(e),e?(favouritesAnime=e,renderFavourites(),console.log("usa LS")):(getAnimeData(),console.log("no estoy en el LS"))}btnSearch.addEventListener("click",handleClick),btnReset.addEventListener("click",handleClickReset),onLoad();